(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{8244:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(5893),o=r(6156),i=r(7294),c=r(2283),s=r(9198),a=r.n(s),l=r(6770),u=r.n(l),p=r(9669),f=r.n(p),d=r(4155);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){var t=e.values,r=e.setValues,o=e.setLoading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"row",children:t.images&&t.images.map((function(e){return(0,n.jsx)("div",{count:"x",onClick:function(){return n=e.public_id,o(!0),void f().post("".concat(d.env.REACT_APP_API,"/removeimage"),{public_id:n},{}).then((function(e){o(!1);var i=t.images.filter((function(e){return e.public_id!==n}));r(b(b({},t),{},{images:i}))})).catch((function(e){console.log(e),o(!1)}));var n},style:{cursor:"pointer"},children:(0,n.jsx)("img",{src:e.url,size:100,shape:"square",className:"ml-3"})},e.public_id)}))}),(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("label",{className:"btn btn-primary mt-3 btn-raised",children:["Choose File",(0,n.jsx)("input",{type:"file",multiple:!0,hidden:!0,accept:"images/*",onChange:function(e){var n=e.target.files,i=t.images;if(n){o(!0);for(var c=0;c<n.length;c++)u().imageFileResizer(n[c],720,720,"JPEG",100,0,(function(e){f().post("".concat(d.env.REACT_APP_API,"/uploadimages"),{image:e}).then((function(e){console.log("IMAGE UPLOAD RES DATA",e),o(!1),i.push(e.data),r(b(b({},t),{},{images:i}))})).catch((function(e){o(!1),console.log("CLOUDINARY UPLOAD ERR",e)}))}),"base64")}}})]})})]})};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={images:[]},y=function(e){var t=e.onSubmit,r=e.initialData,o=void 0===r?{}:r,s=(0,i.useState)(O),l=s[0],u=s[1],p=(0,i.useState)(null),f=p[0],d=p[1],m=(0,i.useState)(null),b=m[0],h=m[1],y=(0,c.cI)({defaultValues:o}),v=y.register,x=y.handleSubmit,P=y.setValue,w=(y.photo,(0,i.useState)(!1)),D=(w[0],w[1]);(0,i.useEffect)((function(){v("startDate"),v("endDate")}),[v]),(0,i.useEffect)((function(){var e=o.startDate,t=o.endDate;e&&d(new Date(e)),t&&h(new Date(t))}),[o]);var N=function(e,t){return function(r){P(e,r),t(r)}};return(0,n.jsxs)("form",{onSubmit:x(t),children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"title",children:"Title"}),(0,n.jsx)("input",g(g({},v("title")),{},{name:"title",type:"text",className:"form-control",id:"title"}))]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"city",children:"Company"}),(0,n.jsx)("input",g(g({},v("company")),{},{name:"company",type:"text",className:"form-control",id:"company"}))]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"city",children:"Company Website"}),(0,n.jsx)("input",g(g({},v("companyWebsite")),{},{name:"companyWebsite",type:"text",className:"form-control",id:"companyWebsite"}))]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"street",children:"Location"}),(0,n.jsx)("input",g(g({},v("location")),{},{name:"location",type:"text",className:"form-control",id:"location"}))]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"street",children:"Job Title"}),(0,n.jsx)("input",g(g({},v("jobTitle")),{},{name:"jobTitle",type:"text",className:"form-control",id:"jobTitle"}))]}),(0,n.jsx)(j,g(g({className:"form-group",values:l,setValues:u,setLoading:D},v("images")),{},{id:"images"})),JSON.stringify(l),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"description",children:"Description"}),(0,n.jsx)("textarea",g(g({},v("description")),{},{name:"description",rows:"5",type:"text",className:"form-control",id:"description"}))]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"street",children:"Tech Stack"}),(0,n.jsx)("input",g(g({},v("techStack")),{},{name:"techStack",type:"text",className:"form-control",id:"techStack"}))]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"startDate",children:"Start Date"}),(0,n.jsx)("div",{children:(0,n.jsx)(a(),{showYearDropdown:!0,selected:f,onChange:N("startDate",d)})})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"endDate",children:"End Date"}),(0,n.jsx)("div",{children:(0,n.jsx)(a(),{disabled:!b,showYearDropdown:!0,selected:b,onChange:N("endDate",h)})})]}),(0,n.jsxs)("div",{className:"form-group",children:[b&&(0,n.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return N("endDate",h(null))},children:"No end date"}),!b&&(0,n.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){return N("endDate",h(new Date((new Date).setHours(0,0,0,0))))},children:"Set end date"})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create"})]})}},5748:function(e,t,r){"use strict";var n=r(7294),o=r(1163);t.Z=function(e){var t=e.to,r=e.ssr,i=(0,o.useRouter)();return(0,n.useEffect)((function(){r?window.location.pathname=t:i.push(t)}),[]),null}},2309:function(e,t,r){"use strict";r.d(t,{H4:function(){return d},Rn:function(){return m},k$:function(){return b},dy:function(){return j}});var n=r(6156),o=r(2949),i=r(9669),c=r.n(i),s=r(9593),a=r(5723);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var u=function(e){return c().post("/api/v1/portfolios",e)},p=function(e,t){return c().patch("/api/v1/portfolios/".concat(e),t)},f=function(e){return c().delete("/api/v1/portfolios/".concat(e))},d=function(){return(0,s.k)(u)},m=function(){return(0,s.k)(p)},b=function(){return(0,s.k)(f)},j=function(e){var t=(0,a.ZP)(e?"/api/v1/portfolios/".concat(e):null,s._),r=t.data,i=t.error;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({data:r,error:i,loading:!r&&!i},(0,o.Z)(t,["data","error"]))}},5874:function(e,t,r){"use strict";var n=r(6156),o=r(5893),i=r(3205),c=r(5748),s=r(1051);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return function(t){return function(r){var l=(0,i.p)(),u=l.data,p=l.loading;return p?(0,o.jsx)("p",{children:"Loading..."}):u?t&&!(0,s.QO)(u,t)?(0,o.jsx)(c.Z,{ssr:!0,to:"/api/v1/login"}):(0,o.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({user:u,loading:p},r)):(0,o.jsx)(c.Z,{ssr:!0,to:"/api/v1/login"})}}}},36:function(e,t,r){"use strict";r.r(t);var n=r(5893),o=r(3391),i=r(3299),c=r(4301),s=r(5874),a=r(267),l=r(1252),u=r(8244),p=r(2309),f=r(5748);t.default=(0,s.Z)((function(e){var t=e.user,r=e.loading,s=(0,p.H4)(),d=(0,o.Z)(s,2),m=d[0],b=d[1],j=b.data,h=(b.loading,b.error);return j?(0,n.jsx)(f.Z,{to:"/portfolios"}):(0,n.jsx)(i.Z,{user:t,loading:r,children:(0,n.jsx)(c.Z,{header:"Create Portfolio",children:(0,n.jsx)(a.Z,{children:(0,n.jsxs)(l.Z,{md:"8",children:[(0,n.jsx)(u.Z,{onSubmit:m}),h&&(0,n.jsx)("div",{className:"alert alert-danger mt-2",children:h})]})})})})}))("admin")},5097:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portfolios/new",function(){return r(36)}])}},function(e){e.O(0,[774,471,93,703,133,545,888,179],(function(){return t=5097,e(e.s=t);var t}));var t=e.O();_N_E=t}]);